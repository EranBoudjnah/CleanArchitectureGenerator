<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <!-- Unique identifier of the plugin. It should be FQN. It cannot be changed between the plugin versions. -->
    <id>com.mitteloupe.cleanarchitecturegenerator</id>

    <!-- Public plugin name should be written in Title Case.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/best-practices-for-listing.html#plugin-name -->
    <name>Clean Architecture Generator (CAG)</name>

    <version>0.4.0</version>

    <change-notes><![CDATA[
        <h2>0.4.0</h2>
        <h3>Added</h3>
        <ul>
            <li>Added dependency injection (DI) support across CLI, plugin, and templates, including options for Hilt and Koin (#39, #40, #41, #42, #43, #44, #45, #49, #50)</li>
            <li>Added hot-reload functionality to new project template (#48)</li>
            <li>Added plugin icon to README.md (#46, #47)</li>
        </ul>

        <h3>Changed</h3>
        <ul>
            <li>Polished and updated generated MainActivity and Application files (#34)</li>
            <li>Consolidated and improved help contents (#43)</li>
            <li>Broke down code generator for better maintainability (#36)</li>
            <li>Tightened Hilt integration and decoupled it from core libraries (#35, #37)</li>
            <li>Updated all dependencies and reformatted codebase (#33)</li>
            <li>Tidied and updated version catalog in generated projects (#32)</li>
        </ul>

        <h3>Fixed</h3>
        <ul>
            <li>Limited visibility of DI-related code</li>
        </ul>
    ]]></change-notes>

    <!-- A displayed Vendor name or Organization ID displayed on the Plugins Page. -->
    <vendor url="https://uk.linkedin.com/in/eranboudjnah">Mitteloupe Limited</vendor>

    <resource-bundle>messages.CleanArchitectureGeneratorBundle</resource-bundle>

    <!-- Description of the plugin displayed on the Plugin Page and IDE Plugin Manager.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/best-practices-for-listing.html#plugin-description -->
    <description><![CDATA[
        Provides quick actions to create:
        <ul>
            <li><b>New Clean Architecture project</b> - A template for creating new projects</li>
            <li><b>Architecture Package</b> - A Clean Architecture architecture package</li>
            <li><b>Features</b> - Complete feature modules with presentation, domain, and data layers</li>
            <li><b>Data Sources</b> - Repository implementations and data source classes</li>
            <li><b>Use Cases</b> - Domain use cases following Clean Architecture principles</li>
            <li><b>ViewModels</b> - Presentation ViewModels following Clean Architecture principles</li>
        </ul>
        In addition, provides some inline inspections to help maintain conventions.
        <br>
        Designed for Android and Kotlin projects following Clean Architecture patterns.
    ]]></description>

    <!-- Product and plugin compatibility requirements.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html -->
    <depends>com.intellij.modules.platform</depends>
    <depends>org.jetbrains.android</depends>
    <depends>com.intellij.modules.androidstudio</depends>

    <!-- Extension points defined by the plugin.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-extension-points.html -->
    <extensions defaultExtensionNs="com.android.tools.idea.wizard.template">
        <wizardTemplateProvider implementation="com.mitteloupe.cag.cleanarchitecturegenerator.projectwizard.CleanArchitectureWizardTemplateProvider"/>
    </extensions>

    <extensions defaultExtensionNs="com.intellij">
        <localInspection language="kotlin"
                         implementationClass="com.mitteloupe.cag.cleanarchitecturegenerator.inspection.ViewModelPublicFunctionShouldStartWithOnInspection"
                         enabledByDefault="true"
                         level="WARNING"
                         groupKey="inspection.clean.architecture.group.name"
                         key="inspection.viewmodel.function.name.starts.with.on.display.name"/>

        <localInspection language="kotlin"
                         implementationClass="com.mitteloupe.cag.cleanarchitecturegenerator.inspection.ViewModelFunctionShouldNotContainUiTermsInspection"
                         enabledByDefault="true"
                         level="WARNING"
                         groupKey="inspection.clean.architecture.group.name"
                         key="inspection.viewmodel.function.name.ui.agnostic.display.name"/>

        <applicationConfigurable
                id="com.mitteloupe.cag.settings.Settings"
                key="settings.display.name"
                parentId="tools"
                provider="com.mitteloupe.cag.cleanarchitecturegenerator.settings.versioncatalog.RootConfigurableProvider"/>

        <applicationConfigurable
                id="com.mitteloupe.cag.settings.VersionCatalogSettings.NewProjectLibraries"
                key="settings.versions.new.projects.display.name"
                parentId="com.mitteloupe.cag.settings.Settings"
                provider="com.mitteloupe.cag.cleanarchitecturegenerator.settings.versioncatalog.template.NewProjectLibrariesConfigurableProvider"/>

        <projectConfigurable
                id="com.mitteloupe.cag.settings.VersionCatalogSettings.CurrentProjectLibraries"
                key="settings.versions.current.project.display.name"
                parentId="com.mitteloupe.cag.settings.Settings"
                nonDefaultProject="false"
                provider="com.mitteloupe.cag.cleanarchitecturegenerator.settings.versioncatalog.current.CurrentProjectLibrariesConfigurableProvider"/>
    </extensions>

    <actions>
        <group id="NewCleanArchitectureGenerator" popup="false">
            <action id="com.mitteloupe.cag.cleanarchitecturegenerator.CreateCleanArchitecturePackageAction"
                    class="com.mitteloupe.cag.cleanarchitecturegenerator.CreateCleanArchitecturePackageAction"/>
            <action id="com.mitteloupe.cag.cleanarchitecturegenerator.CreateCleanArchitectureFeatureAction"
                    class="com.mitteloupe.cag.cleanarchitecturegenerator.CreateCleanArchitectureFeatureAction"/>
            <action id="com.mitteloupe.cag.cleanarchitecturegenerator.CreateDataSourceAction"
                    class="com.mitteloupe.cag.cleanarchitecturegenerator.CreateDataSourceAction"/>
            <action id="com.mitteloupe.cag.cleanarchitecturegenerator.CreateUseCaseAction"
                    class="com.mitteloupe.cag.cleanarchitecturegenerator.CreateUseCaseAction"/>
            <action id="com.mitteloupe.cag.cleanarchitecturegenerator.CreateViewModelAction"
                    class="com.mitteloupe.cag.cleanarchitecturegenerator.CreateViewModelAction"/>
            <separator />
            <add-to-group group-id="NewGroup" anchor="first"/>
        </group>
    </actions>

    <idea-version since-build="AI-243.*" until-build="AI-251.*" />
</idea-plugin>
